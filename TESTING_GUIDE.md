# c_utils.py 更新後の動作確認ガイド

## ログ分析結果

```
Warning: ScrArea structure size (176) seems too small for Blender 4.x
Structure size validation:
  ID: 392 bytes
  bScreen: 520 bytes  
  ScrArea: 176 bytes  ← 警告
  uiStyle: 232 bytes
c_utils: Successfully registered with Blender 4.x structure definitions
```

**ScrAreaの警告について**: 176バイトは予想より小さく警告が出ていますが、致命的ではありません。実際の動作テストで問題が無ければ許容範囲です。

## 更新した構造体と関連機能の特定

### 1. ScrArea構造体 - 最も使用頻度が高い 🔴 重要

**使用箇所**:
- `extra_operators.py` (8箇所)
  - `CTU.swap_spaces()` - エリア間でスペースタイプを交換
  - `CTU.resize_area()` - エリアのサイズ変更
- `bl_utils.py` (2箇所)  
  - `c_utils.set_area()` - コンテキストのエリア設定

**関連するPME機能**:
- **エリア管理操作** - 3Dビュー、テキストエディター、ノードエディターなどの切り替え
- **ウィンドウレイアウト操作** - エリアの分割、リサイズ、統合
- **コンテキスト操作** - 操作対象エリアの指定と変更

### 2. ID構造体 - 基盤となる構造 🟡 中程度

**使用箇所**: 直接的な使用は確認できませんが、他の構造体の基底として重要

**関連するPME機能**:
- **データブロック操作** - メッシュ、マテリアル、オブジェクトなどへのアクセス
- **ファイル操作** - .blendファイルの読み込み、保存時のデータ管理

### 3. bScreen、uiStyle構造体 - 利用頻度は低め 🟢 低

**直接的な使用箇所は確認できず** - 内部的に使用される可能性

### 4. パイメニュー関連機能 - コメントアウト状態 ⚪ 未使用

- `keep_pie_open()` - operators.pyでコメントアウト済み
- 現在は無効化されている

## 推奨テスト計画

### 🔴 高優先度: エリア操作機能

1. **エリアスペース切り替え**
   - 3Dビューポート ↔ テキストエディター
   - ノードエディター ↔ シェーダーエディター
   - 各種エディター間の切り替えが正常に動作するか

2. **ウィンドウレイアウト操作**
   - エリアの分割 (Ctrl+クリック&ドラッグ)
   - エリアのリサイズ
   - エリアの統合

3. **コンテキスト依存操作**
   - アクティブエリアが正しく認識されるか
   - エリア固有のパイメニューが正常に表示されるか

### 🟡 中優先度: 基本的なPME機能

1. **パイメニューの基本動作**
   - パイメニューの表示
   - 各アイテムの選択
   - アニメーション・トランジション

2. **設定とカスタマイズ**
   - PME設定画面の表示
   - メニューの編集・追加・削除

### 🟢 低優先度: 詳細機能

1. **ファイル操作関連**
   - .blendファイルの保存・読み込み
   - PME設定のインポート・エクスポート

2. **UI関連**
   - テーマやスタイルの適用
   - フォント表示

## テスト方法

### 段階的テストアプローチ

1. **基本動作確認** (5分)
   - PMEが有効になっているか
   - 基本的なパイメニューが表示されるか

2. **エリア操作テスト** (10分)
   - 異なるエディター間でパイメニューを呼び出す
   - `swap_spaces`や`resize_area`を使う操作を実行

3. **エラー監視** (継続的)
   - コンソールでエラーメッセージを監視
   - 異常な動作やクラッシュの確認

### 想定される問題と対処

1. **メモリアクセス エラー**
   - 症状: セグメンテーションフォルト、クラッシュ
   - 対処: 構造体定義の再確認が必要

2. **機能の部分的不動作**  
   - 症状: 特定操作でエラー、意図しない動作
   - 対処: 該当構造体フィールドの調整

3. **パフォーマンス問題**
   - 症状: 動作が重い、レスポンス悪化
   - 対処: 構造体アクセス方法の最適化

## ログ収集のお願い

テスト実行時に以下の情報を記録していただけると助かります：

1. **正常動作した機能** - どの操作が問題なく動作したか
2. **エラーが発生した機能** - どの操作でエラーが出たか
3. **コンソールのエラーメッセージ** - 具体的なエラー内容
4. **Blender のバージョン情報** - 正確なバージョン番号

これらの情報を元に、Phase 2の優先度を決定し、必要な追加修正を行います。

---

**テスト対象**: Phase 1 更新内容  
**重点**: ScrArea構造体を使用するエリア操作機能  
**期間**: 現在〜Phase 2開始前